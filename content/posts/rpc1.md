---
title: "RPC实战与核心原理（一）"
date: 2022-02-16T17:44:25+08:00
description: 《RPC实战与核心原理》阅读笔记（一） 
tags: [rpc, 极客,阅读笔记]
author: zoulingbin
---

<!--more-->

## 什么是RPC？
RPC全称Remote Procedure Call，远程过程调用。远程肯定是指要跨机器而非本机，所以需要网络编程才能实现。rpc帮助我们冰壁网络编程细节，实现调用远程方法就跟调用本地一样的体验。
rpc的作用体现在这两方面：
- 屏蔽远程调用跟本地调用的区别，让我们感觉就是调用项目内的方法；
- 隐藏底层网络通信的复杂性

## RPC通信流程
RPC常用于业务系统之间的数据交互，需要保证其可靠性，所以RPC一般默认采用`TCP`协议来传输。RPC和HTTP协议一样，是应用层协议，建立在TCP之上的。

网络传输的数据必须是二进制数据，但调用方请求的出入参数都是对象，所以需要把这些对象通过可逆的转换算法，转成二进制，这个过程一般叫做"序列化"。根据协议格式，服务提供方将二进制的消息体逆向还原成请求对象，这个过程就叫做"反序列化"。

服务提供方根据反序列化出来的请求对象找到对应的实现类，完成真正的方法调用，然后把执行结果序列化后，回写道对应的`TCP`通道里面。调用方获取到应答的数据包后，再反序列化成应答对象，这样调用方就完成了一次`RPC`调用。

由服务提供者给出业务接口生命，在调用方的程序里面，RPC框架根据调用的服务接口提前生成动态代理实现类，并通过依赖注入等技术注入到声明了该接口的相关业务逻辑里面。该dialing实现类回拦截所有的方法调用，在提供的方法处理逻辑里面完成一整套的远程调用，
并把远程调用结果返回给调用方，这样调用方在调用远程方法的时候就获得了像调用本地接口一样的体验。
到这里，一个简单版本的RPC框架就实现了。